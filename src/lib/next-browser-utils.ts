
/**
 * CLIENT SIDE Streamlined access to the content generated by next.js in the ML component props
 */
export interface IMLNextBrowserUtils {
	/**
	 * Return the page data, parsed from json if relevant
	 * 
	 * Guaranteed not null
	 * @param pageData 
	 */
	getParsedPagedData<T>(pageData: string | object | null): T[];
}

class MLNextBrowserUtils implements IMLNextBrowserUtils {

	public 	getParsedPagedData<T>(pageData: string | object | null): T[] {
		if (!pageData) {
			return []
		}
		const parsedData = typeof pageData === "string" ? JSON.parse(pageData) : pageData;
		return Array.isArray(parsedData) ? parsedData : [];
	}

}

export const mlNextBrowserUtils: IMLNextBrowserUtils = new MLNextBrowserUtils();
